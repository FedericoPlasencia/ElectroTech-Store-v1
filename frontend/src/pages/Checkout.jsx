import React, { useState } from 'react'
import { useCart } from '../context/CartContext.jsx'
import { useNavigate } from 'react-router-dom'
export default function Checkout(){ const { cart, total, clearCart } = useCart(); const nav = useNavigate(); const [form, setForm] = useState({nombre:'', email:'', direccion:'', envio:'envio'}); const [confirmed, setConfirmed] = useState(false); const handle = e=> setForm({...form, [e.target.name]: e.target.value}); const submit = e=>{ e.preventDefault(); if(!form.nombre||!form.email||!form.direccion){ alert('Completa todos los campos'); return } setConfirmed(true); setTimeout(()=>{ clearCart(); nav('/') },3500) }; if(confirmed) return <div className='p-8 text-center'><h2 className='text-2xl font-bold text-green-600'>✅ Compra confirmada</h2><p>Gracias {form.nombre}. Te contactaremos por email: {form.email}</p></div>; return (<div className='p-8 max-w-4xl mx-auto grid md:grid-cols-2 gap-6'><form onSubmit={submit} className='bg-white p-6 rounded shadow space-y-4'><h3 className='text-lg font-semibold'>Datos de contacto</h3><input name='nombre' value={form.nombre} onChange={handle} placeholder='Nombre completo' className='w-full border p-2 rounded' /><input name='email' value={form.email} onChange={handle} placeholder='Email' className='w-full border p-2 rounded' /><input name='direccion' value={form.direccion} onChange={handle} placeholder='Dirección' className='w-full border p-2 rounded' /><select name='envio' value={form.envio} onChange={handle} className='w-full border p-2 rounded'><option value='retiro'>Retiro en sucursal (sin costo)</option><option value='envio'>Envío a domicilio (+$2500)</option></select><button className='w-full bg-green-500 text-white p-2 rounded'>Confirmar compra</button></form><div className='bg-gray-50 p-6 rounded shadow'><h3 className='text-lg font-semibold mb-4'>Resumen</h3><ul className='space-y-2'>{cart.map(i=> <li key={i.id} className='flex justify-between'>{i.name} x {i.qty} <span>${i.price*i.qty}</span></li>)}</ul><div className='mt-4 text-right font-bold'>Total: ${total}</div></div></div>) }
